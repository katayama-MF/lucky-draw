# ストップ〜完全停止までの時間を約半分にする仕様案

**※ B案を採用・実装済み（既定 100〜200 → 50〜100）

**目標**: 標準・サクサクの両方で「ストップを押してから止まるまで」を**今の約半分**にする。

---

## 現状：何が時間を決めているか

| 要因 | 説明 | 現状の値 |
|------|------|----------|
| **移動距離** | 抽選で決まる「あと何マスで止めるか」× 1マス幅(256px) | N = 設定の reelStopMin〜Max（既定 100〜200 マス） |
| **減速の初速 v0** | ストップ時点の速度の上限。この値から減速カーブで落ちていく | 標準 60 / サクサク 80 |
| **減速カーブ** | 進み具合 ratio に対する speed の式 | 標準 (1-ratio)^0.7 / サクサク (1-ratio)^0.5 |

同じ距離なら「平均速度が2倍 → かかる時間は約半分」。  
→ **初速 v0 を2倍にする**と、同じ N のままでも減速時間が約半分になる。

---

## 案A: 減速の初速 v0 を2倍にする（推奨）

**変更箇所**: `stopSpin()` 内の `maxSpeedForDecel` と v0 の上限

| モード | 現状 | 変更後 | 効果 |
|--------|------|--------|------|
| 標準 | 60 | **120** | 同じ距離を約半分の時間で |
| サクサク | 80 | **160** | 同上 |

**実装イメージ**:
```js
// 変更前
const maxSpeedForDecel=config.speedMode==='fast' ? 80 : REEL_SPEED_MAX;

// 変更後（約半分の時間にするため2倍）
const DECEL_SPEED_MULTIPLIER=2;  // 1 で現状、2 で約半分の時間
const baseMax=config.speedMode==='fast' ? 80 : REEL_SPEED_MAX;
const maxSpeedForDecel=baseMax*DECEL_SPEED_MULTIPLIER;
```

**表示速度について**  
現在は「実際の速度」をそのまま表示している。2倍にすると減速中に 120 や 160 が出る。

- **そのまま表示する**: デバッグしやすい。「速くなった」が数字でも分かる。
- **表示だけキャップする**: 標準は 60、サクサクは 80 までに抑え、見た目は今まで通りにする。

どちらでも挙動（止まるまでの時間）は同じ。好みで選べる。

---

## 案B: 止まるマス数（N）の既定値を半分にする

**変更箇所**: 設定の既定値 `reelStopMin` / `reelStopMax`

| 項目 | 現状 | 変更後 |
|------|------|--------|
| 既定 Min | 100 | 50 |
| 既定 Max | 200 | 100 |

**効果**: 抽選で決まる「あと何マス進むか」が平均で半分になるので、**距離が半分 → 止まるまでの時間も約半分**。

**注意**: 「回るマス数」が減るので、**景品が流れる見せ方・スリル**が変わる。  
「同じだけ回って、ただ早く止まる」なら案A。「回る量そのものを短くする」なら案B。

---

## 案C: 案A + 案B の併用

- v0 を 1.5 倍程度に上げる（60→90、80→120）
- 既定の N を 100〜200 → 75〜150 など少し短くする  

→ 合わせて「約半分の時間」にしつつ、どちらか片方だけを極端にしない。

---

## 推奨

- **まず案A（v0 を2倍）**でよいと思う。
  - 実装が1箇所で済む
  - 「何マスで止めるか」の抽選ロジックはそのまま
  - 体感は「同じだけ回るが、減速が速く終わる」になる

- 表示は「実際の速度をそのまま」でも、「標準60/サクサク80でキャップ」でもよい。  
  本番で速度表示を隠すなら、どちらでも大きな差はない。

---

## 実装時の注意

- **MIN_SPEED（最低速度 1）**はそのままでよい。  
  v0 を2倍にしても「終盤は最低速度で確実に止まる」ようにするため。
- **加速側（startSpin）の最大速度**は変えなくてよい。  
  ストップを押した時点の currentReelSpeed をそのまま v0 の元にし、上限だけ 120/160 にすれば、加速が 60/80 のままでも減速だけ約2倍速になる。
